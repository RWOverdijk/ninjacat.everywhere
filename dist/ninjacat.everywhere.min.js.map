{"version":3,"sources":["ninjacat.everywhere.js"],"names":["document","window","_hassupport","_custom","ninjacateverywhere","parse","domortext","exp","charAt","substr","rx","RegExp","el","createElement","innerHTML","replace","addcustom","emojis","match","forEach","a","charCodeAt","toString","toUpperCase","support","devicePixelRatio","ctx","getContext","fillStyle","textBaseline","font","mt","measureText","chk","width","mode","documentMode","_check","legacymode"],"mappings":";CAYA,SAAUA,EAASC,GAEjB,aAEA,IAAIC,EAAc,KACdC,EAAU,KA6DdF,EAAOG,oBACLC,MArDF,SAAgBC,GAEd,IAAIC,EAAM,EAAgB,GAAK,qBAC/BA,GAAYJ,IAEiB,MAAlBI,EAAIC,OAAO,KAAYD,EAAMA,EAAIE,OAAO,IAEnD,IAAIC,EAAKH,GAAO,IAAII,OAAO,OAAsBJ,EAAI,IAAI,KAErDK,EAAK,KAST,MARkB,iBAAPA,GACTA,EAAKZ,EAASa,cAAc,QACzBC,UAAYR,EAEfM,EAAM,WAAYN,EAAaA,EAAU,GAAKA,EAE5CI,IAAIE,EAAGE,UAAYF,EAAGE,UAAUC,QAAQL,EAAG,kEAExCE,GAoCPI,UA7DF,SAAoBC,GAClBd,EAAUA,GAAW,GACrBc,EAAOC,MAAM,SAASC,QAAQ,SAASC,GACrCjB,GAAW,OAASiB,EAAEC,WAAW,GAAGC,SAAS,IAAIC,cAAgB,MAAQH,EAAEC,WAAW,GAAGC,SAAS,IAAIC,iBA2DxGC,QAjCF,WAEE,OADoB,OAAhBtB,IAAsBA,EAI5B,WACmBD,EAAOwB,iBAAxB,IAIIC,EAFOzB,EAAOD,SAASa,cAAc,UAE1Bc,WAAW,MAC1B,IAAKD,EAAK,OAAO,EAEjBA,EAAIE,UAAY,OAChBF,EAAIG,aAAe,MACnBH,EAAII,KAAO,aAMX,IAAIC,EAAKL,EAAIM,YAAY,SACrBC,IAAM,GAASF,EAAGG,MAAM,GAAI,IAC5BC,EAAOnC,EAASoC,cAAgB,EAIpC,OAFKH,GAAOE,GAAQA,GAAM,KAAIF,GAAM,GAE7BA,EA1BiCI,IACjCnC,GAgCPoC,WAAY,WACVpC,GAAc,IAvEpB,CA2EGF,SAASC","sourcesContent":["/* \r\n  ####==--  Ninja Cat Everywhere v{@version} - Emoji polyfill support for old Windows, iOS, Android and other devices\r\n  ###=-     created by InuYaksa*2018 \r\n  ##=       https://github.com/inuyaksa/ninjacat.everywhere \r\n  ##=\r\n  ##=       Inspired by Dillon de Voor, code from http://crocodillon.com/blog/parsing-emoji-unicode-in-javascript\r\n  ##=       and by danalloway, code from https://github.com/danalloway/detect-emoji-support/blob/master/src/index.js\r\n  ##=       thanks to Emojipedia for images https://emojipedia.org/\r\n  ##=       thanks to Microsoft for ninjacat emojis and Visual Studio Code\r\n*/\r\n\r\n\r\n(function(document,window){\r\n\r\n  \"use strict\";\r\n  \r\n  var _hassupport = null;\r\n  var _custom = null;\r\n\r\n  function _addcustom(emojis) {\r\n    _custom = _custom || \"\";\r\n    emojis.match(/.{2}/g).forEach(function(a){            \r\n      _custom += \"|\\\\u\" + a.charCodeAt(0).toString(16).toUpperCase() + \"\\\\u\" + a.charCodeAt(1).toString(16).toUpperCase();\r\n    });\r\n  }\r\n\r\n  function _parse(domortext) {\r\n    \r\n    var exp = (_hassupport) ? \"\" : \"\\uD83D\\uDC64|\\uD83D\\uDCBB|\\uD83D\\uDE80|\\uD83C\\uDFCD|\\uD83D\\uDC53|\\uD83D\\uDC09\";\r\n    exp = exp + _custom;\r\n\r\n    if (exp && exp.charAt(0) === '|') exp = exp.substr(1);\r\n\r\n    var rx = exp && new RegExp(\"\\uD83D\\uDC31\\u200D(\"+exp+\")\",\"g\");\r\n\r\n    var el = null;\r\n    if (typeof el === \"string\") {\r\n      el = document.createElement('div');    \r\n      el.innerHTML = domortext;\r\n    } else {\r\n      el = (\"length\" in domortext) ? domortext[0] : domortext;\r\n    }\r\n    if (rx) el.innerHTML = el.innerHTML.replace(rx,'<span class=\"ninjacateverywhere-poly\" data-emoji=\"$1\"></span>');\r\n\r\n    return el;\r\n\r\n  }\r\n\r\n  function _support() {\r\n    if (_hassupport === null) _hassupport = _check();\r\n    return _hassupport;\r\n  }\r\n\r\n  function _check() {\r\n    var pixelRatio = window.devicePixelRatio || 1;\r\n    var offset = 12 * pixelRatio;\r\n    var node = window.document.createElement('canvas');\r\n\r\n    var ctx = node.getContext('2d');\r\n    if (!ctx) return false;\r\n    \r\n    ctx.fillStyle = '#f00';\r\n    ctx.textBaseline = 'top';\r\n    ctx.font = '32px Arial';\r\n    \r\n    //ctx.fillText('\\uD83D\\uDC31\\u200D\\uD83D\\uDC64', 0, 0); // üê±‚Äçüë§ ninja cat test\r\n    //$(\"body\").append(node);\r\n    //return ctx.getImageData(offset * 2, offset, 1, 1).data[0] !== 0;\r\n\r\n    var mt = ctx.measureText('\\uD83D\\uDC31\\u200D\\uD83D\\uDC64');\r\n    var chk = (mt) ? ((mt.width/32)<1.4) : false;\r\n    var mode = document.documentMode || 0;\r\n\r\n    if (!chk && mode && mode>=11) chk = true; // fix for IE11 does not support ninjacats on canvas\r\n\r\n    return chk;\r\n  }\r\n\r\n  window.ninjacateverywhere = {\r\n    parse: _parse,\r\n    addcustom: _addcustom,\r\n    support: _support,\r\n    legacymode: function() {\r\n      _hassupport = false;\r\n    }\r\n  };\r\n\r\n})(document,window);\r\n\r\n"],"file":"ninjacat.everywhere.min.js"}